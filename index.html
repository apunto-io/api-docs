
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentación de la API de Apunto"
        >
    <title>Documentación API de Apunto</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c76f520c.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-966d6edc.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-024da600.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-7f3af8b3.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduccion" class="toc-h1 toc-link" data-title="Introducción">Introducción</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#caracteristicas-principales" class="toc-h2 toc-link" data-title="Características Principales">Características Principales</a>
                  </li>
                  <li>
                    <a href="#paginacion" class="toc-h2 toc-link" data-title="Paginación">Paginación</a>
                  </li>
                  <li>
                    <a href="#versionado-de-la-api" class="toc-h2 toc-link" data-title="Versionado de la API">Versionado de la API</a>
                  </li>
                  <li>
                    <a href="#soporte" class="toc-h2 toc-link" data-title="Soporte">Soporte</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#autenticacion" class="toc-h1 toc-link" data-title="Autenticación">Autenticación</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#descripcion-general" class="toc-h2 toc-link" data-title="Descripción General">Descripción General</a>
                  </li>
                  <li>
                    <a href="#crear-un-token-de-api" class="toc-h2 toc-link" data-title="Crear un Token de API">Crear un Token de API</a>
                  </li>
                  <li>
                    <a href="#usar-el-token-de-api" class="toc-h2 toc-link" data-title="Usar el Token de API">Usar el Token de API</a>
                  </li>
                  <li>
                    <a href="#login-autenticacion-alternativa" class="toc-h2 toc-link" data-title="Login (Autenticación Alternativa)">Login (Autenticación Alternativa)</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#operaciones" class="toc-h1 toc-link" data-title="Operaciones">Operaciones</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#objeto-operation" class="toc-h2 toc-link" data-title="Objeto Operation">Objeto Operation</a>
                  </li>
                  <li>
                    <a href="#listar-operaciones-get" class="toc-h2 toc-link" data-title="Listar Operaciones GET">Listar Operaciones <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#obtener-una-operacion-get" class="toc-h2 toc-link" data-title="Obtener una Operación GET">Obtener una Operación <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#crear-operacion-post" class="toc-h2 toc-link" data-title="Crear Operación POST">Crear Operación <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#actualizar-operacion-put" class="toc-h2 toc-link" data-title="Actualizar Operación PUT">Actualizar Operación <span class="badge badge-warning">PUT</span></a>
                  </li>
                  <li>
                    <a href="#eliminar-operacion-delete" class="toc-h2 toc-link" data-title="Eliminar Operación DELETE">Eliminar Operación <span class="badge badge-danger">DELETE</span></a>
                  </li>
                  <li>
                    <a href="#comentarios-de-operacion" class="toc-h2 toc-link" data-title="Comentarios de Operación">Comentarios de Operación</a>
                  </li>
                  <li>
                    <a href="#tareas-de-operacion" class="toc-h2 toc-link" data-title="Tareas de Operación">Tareas de Operación</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#servicios" class="toc-h1 toc-link" data-title="Servicios">Servicios</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#objeto-service" class="toc-h2 toc-link" data-title="Objeto Service">Objeto Service</a>
                  </li>
                  <li>
                    <a href="#listar-servicios-get" class="toc-h2 toc-link" data-title="Listar Servicios GET">Listar Servicios <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#obtener-un-servicio-get" class="toc-h2 toc-link" data-title="Obtener un Servicio GET">Obtener un Servicio <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#crear-servicio-post" class="toc-h2 toc-link" data-title="Crear Servicio POST">Crear Servicio <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#actualizar-servicio-put" class="toc-h2 toc-link" data-title="Actualizar Servicio PUT">Actualizar Servicio <span class="badge badge-warning">PUT</span></a>
                  </li>
                  <li>
                    <a href="#eliminar-servicio-delete" class="toc-h2 toc-link" data-title="Eliminar Servicio DELETE">Eliminar Servicio <span class="badge badge-danger">DELETE</span></a>
                  </li>
                  <li>
                    <a href="#comentarios-de-servicio" class="toc-h2 toc-link" data-title="Comentarios de Servicio">Comentarios de Servicio</a>
                  </li>
                  <li>
                    <a href="#tareas-de-servicio" class="toc-h2 toc-link" data-title="Tareas de Servicio">Tareas de Servicio</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#contactos" class="toc-h1 toc-link" data-title="Contactos">Contactos</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#objeto-contact" class="toc-h2 toc-link" data-title="Objeto Contact">Objeto Contact</a>
                  </li>
                  <li>
                    <a href="#listar-contactos-get" class="toc-h2 toc-link" data-title="Listar Contactos GET">Listar Contactos <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#obtener-un-contacto-especifico" class="toc-h2 toc-link" data-title="Obtener un Contacto Específico">Obtener un Contacto Específico</a>
                  </li>
                  <li>
                    <a href="#crear-un-contacto-post" class="toc-h2 toc-link" data-title="Crear un Contacto POST">Crear un Contacto <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#actualizar-un-contacto-patch" class="toc-h2 toc-link" data-title="Actualizar un Contacto PATCH">Actualizar un Contacto <span class="badge badge-warning">PATCH</span></a>
                  </li>
                  <li>
                    <a href="#busqueda-rapida-de-contactos-get" class="toc-h2 toc-link" data-title="Búsqueda Rápida de Contactos GET">Búsqueda Rápida de Contactos <span class="badge badge-success">GET</span></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#direcciones" class="toc-h1 toc-link" data-title="Direcciones">Direcciones</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#objeto-address" class="toc-h2 toc-link" data-title="Objeto Address">Objeto Address</a>
                  </li>
                  <li>
                    <a href="#listar-direcciones-get" class="toc-h2 toc-link" data-title="Listar Direcciones GET">Listar Direcciones <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#obtener-una-direccion-especifica-get" class="toc-h2 toc-link" data-title="Obtener una Dirección Específica GET">Obtener una Dirección Específica <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#crear-una-direccion-post" class="toc-h2 toc-link" data-title="Crear una Dirección POST">Crear una Dirección <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#actualizar-una-direccion-patch" class="toc-h2 toc-link" data-title="Actualizar una Dirección PATCH">Actualizar una Dirección <span class="badge badge-warning">PATCH</span></a>
                  </li>
                  <li>
                    <a href="#tipos-de-direccion" class="toc-h2 toc-link" data-title="Tipos de Dirección">Tipos de Dirección</a>
                  </li>
                  <li>
                    <a href="#busqueda-de-direcciones" class="toc-h2 toc-link" data-title="Búsqueda de Direcciones">Búsqueda de Direcciones</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#comentarios-messages" class="toc-h1 toc-link" data-title="Comentarios (Messages)">Comentarios (Messages)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#objeto-message" class="toc-h2 toc-link" data-title="Objeto Message">Objeto Message</a>
                  </li>
                  <li>
                    <a href="#listar-comentarios-get" class="toc-h2 toc-link" data-title="Listar Comentarios GET">Listar Comentarios <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#obtener-un-comentario-get" class="toc-h2 toc-link" data-title="Obtener un Comentario GET">Obtener un Comentario <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#crear-comentario-post" class="toc-h2 toc-link" data-title="Crear Comentario POST">Crear Comentario <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#actualizar-comentario-put" class="toc-h2 toc-link" data-title="Actualizar Comentario PUT">Actualizar Comentario <span class="badge badge-warning">PUT</span></a>
                  </li>
                  <li>
                    <a href="#eliminar-comentario-delete" class="toc-h2 toc-link" data-title="Eliminar Comentario DELETE">Eliminar Comentario <span class="badge badge-danger">DELETE</span></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tareas-to-dos" class="toc-h1 toc-link" data-title="Tareas (To-Dos)">Tareas (To-Dos)</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#objeto-todo" class="toc-h2 toc-link" data-title="Objeto ToDo">Objeto ToDo</a>
                  </li>
                  <li>
                    <a href="#listar-tareas-get" class="toc-h2 toc-link" data-title="Listar Tareas GET">Listar Tareas <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#obtener-una-tarea-get" class="toc-h2 toc-link" data-title="Obtener una Tarea GET">Obtener una Tarea <span class="badge badge-success">GET</span></a>
                  </li>
                  <li>
                    <a href="#crear-tarea-post" class="toc-h2 toc-link" data-title="Crear Tarea POST">Crear Tarea <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#actualizar-tarea-put" class="toc-h2 toc-link" data-title="Actualizar Tarea PUT">Actualizar Tarea <span class="badge badge-warning">PUT</span></a>
                  </li>
                  <li>
                    <a href="#marcar-como-completada-post" class="toc-h2 toc-link" data-title="Marcar como Completada POST">Marcar como Completada <span class="badge badge-info">POST</span></a>
                  </li>
                  <li>
                    <a href="#eliminar-tarea-delete" class="toc-h2 toc-link" data-title="Eliminar Tarea DELETE">Eliminar Tarea <span class="badge badge-danger">DELETE</span></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errores" class="toc-h1 toc-link" data-title="Errores">Errores</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#codigos-de-estado-http" class="toc-h2 toc-link" data-title="Códigos de Estado HTTP">Códigos de Estado HTTP</a>
                  </li>
                  <li>
                    <a href="#formato-de-respuesta-de-error" class="toc-h2 toc-link" data-title="Formato de Respuesta de Error">Formato de Respuesta de Error</a>
                  </li>
                  <li>
                    <a href="#errores-comunes" class="toc-h2 toc-link" data-title="Errores Comunes">Errores Comunes</a>
                  </li>
                  <li>
                    <a href="#mejores-practicas" class="toc-h2 toc-link" data-title="Mejores Prácticas">Mejores Prácticas</a>
                  </li>
                  <li>
                    <a href="#ejemplo-de-manejo-de-errores" class="toc-h2 toc-link" data-title="Ejemplo de Manejo de Errores">Ejemplo de Manejo de Errores</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://apunto.io'>Plataforma Apunto</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentación hecha con Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduccion'>Introducción</h1>
<p>Bienvenido a la <strong>API de Apunto</strong>. Esta API te permite integrarte con la plataforma de freight forwarding de Apunto para gestionar operaciones, servicios, tareas, comentarios, contactos y direcciones de forma programática.</p>

<p>La API está diseñada siguiendo los principios RESTful y retorna respuestas en formato JSON. Todos los endpoints requieren autenticación mediante tokens de API.</p>

<p><strong>URL Base:</strong> <code>https://control.apunto.io/api/v1</code></p>

<aside class="notice">
Para instalaciones personalizadas, la URL base será: <code>https://nombre-empresa.apunto.io/api/v1</code><br>
Donde <code>nombre-empresa</code> corresponde al subdominio de su organización.
</aside>
<h2 id='caracteristicas-principales'>Características Principales</h2>
<ul>
<li><strong>Operaciones</strong>: Gestión completa de operaciones de freight forwarding</li>
<li><strong>Servicios</strong>: Control de servicios de transporte marítimo, aéreo, terrestre y aduanas</li>
<li><strong>Tareas</strong>: Creación y seguimiento de tareas asociadas a operaciones y servicios</li>
<li><strong>Comentarios</strong>: Sistema de comunicación y notas en cada recurso</li>
<li><strong>Contactos</strong>: Gestión de clientes, proveedores y prospectos</li>
<li><strong>Direcciones</strong>: Administración de ubicaciones para embarques y facturación</li>
<li><strong>Autenticación Segura</strong>: Tokens de API con Bearer authentication</li>
</ul>
<h2 id='paginacion'>Paginación</h2>
<p>Todos los endpoints que retornan listas están paginados automáticamente. Cada página contiene <strong>25 registros</strong> por defecto.</p>

<p>Puedes especificar la página deseada usando el parámetro <code>page</code>:</p>

<p><code>GET /api/v1/operations?page=2</code></p>

<p>La información de paginación se incluye en la respuesta JSON:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='versionado-de-la-api'>Versionado de la API</h2>
<p>La versión actual de la API es <strong>v1</strong>. Todos los endpoints tienen el prefijo <code>/api/v1/</code>.</p>

<p>Mantendremos compatibilidad hacia atrás dentro de las versiones principales. Los cambios que rompan compatibilidad resultarán en una nueva versión de la API.</p>
<h2 id='soporte'>Soporte</h2>
<p>Si tienes preguntas o necesitas asistencia con la API de Apunto:</p>

<ul>
<li><strong>Email:</strong> soporte@apunto.com</li>
<li><strong>Documentación:</strong> https://docs.apunto.com</li>
</ul>
<h1 id='autenticacion'>Autenticación</h1><h2 id='descripcion-general'>Descripción General</h2>
<p>La API de Apunto utiliza autenticación mediante Bearer token. Para acceder a la API, necesitas:</p>

<ol>
<li>Crear un token de API en la configuración de tu cuenta</li>
<li>Incluir el token en el header <code>Authorization</code> de cada petición</li>
</ol>
<h2 id='crear-un-token-de-api'>Crear un Token de API</h2>
<p>Los tokens de API se pueden crear a través de la interfaz web:</p>

<ol>
<li>Navega a <strong>Configuración</strong> → <strong>Tokens de API</strong></li>
<li>Haz clic en <strong>Nuevo Token de API</strong></li>
<li>Dale un nombre descriptivo a tu token</li>
<li>Copia el token generado (solo se mostrará una vez)</li>
</ol>
<h2 id='usar-el-token-de-api'>Usar el Token de API</h2>
<blockquote>
<p>Para autenticarte, incluye el token en el header Authorization:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/operations"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'uri'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"https://control.apunto.io/api/v1/operations"</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Bearer TU_TOKEN_API"</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">hostname</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">,</span> <span class="ss">use_ssl: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer TU_TOKEN_API'</span><span class="p">,</span>
    <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://control.apunto.io/api/v1/operations'</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations</span><span class="dl">'</span><span class="p">,</span> <span class="nx">config</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">))</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
</code></pre></div>
<p>Incluye tu token de API en el header <code>Authorization</code> de todas las peticiones:</p>

<p><code>Authorization: Bearer TU_TOKEN_API</code></p>

<aside class="notice">
Reemplaza <code>TU_TOKEN_API</code> con tu token de API real.
</aside>

<aside class="warning">
¡Mantén tus tokens de API seguros! Proporcionan acceso completo a tu cuenta.
</aside>
<h2 id='login-autenticacion-alternativa'>Login (Autenticación Alternativa)</h2>
<p>Si necesitas autenticarte programáticamente y obtener un token:</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/auth"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "email": "usuario@ejemplo.com",
    "password": "tu_contraseña"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"https://control.apunto.io/api/v1/auth"</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">.</span><span class="nf">content_type</span> <span class="o">=</span> <span class="s2">"application/json"</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">dump</span><span class="p">({</span>
  <span class="s2">"email"</span> <span class="o">=&gt;</span> <span class="s2">"usuario@ejemplo.com"</span><span class="p">,</span>
  <span class="s2">"password"</span> <span class="o">=&gt;</span> <span class="s2">"tu_contraseña"</span>
<span class="p">})</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">hostname</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">,</span> <span class="ss">use_ssl: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://control.apunto.io/api/v1/auth'</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'email'</span><span class="p">:</span> <span class="s">'usuario@ejemplo.com'</span><span class="p">,</span>
    <span class="s">'password'</span><span class="p">:</span> <span class="s">'tu_contraseña'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="n">token</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'token'</span><span class="p">]</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/auth</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">usuario@ejemplo.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">password</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tu_contraseña</span><span class="dl">'</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Token:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">token</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='peticion-http'>Petición HTTP</h3>
<p><code>POST /api/v1/auth</code></p>
<h3 id='parametros-del-body'>Parámetros del Body</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>Sí</td>
<td>Correo electrónico del usuario</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>Sí</td>
<td>Contraseña del usuario</td>
</tr>
<tr>
<td>otp_attempt</td>
<td>string</td>
<td>No</td>
<td>Código OTP (si 2FA está activado)</td>
</tr>
</tbody></table>
<h3 id='respuesta'>Respuesta</h3>
<p>Retorna un objeto que contiene el token de API.</p>
<h1 id='operaciones'>Operaciones</h1>
<p>Las operaciones representan procesos completos de freight forwarding (importación, exportación, transporte doméstico, etc.).</p>
<h2 id='objeto-operation'>Objeto Operation</h2><h3 id='atributos-principales'>Atributos Principales</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único</td>
</tr>
<tr>
<td>identification</td>
<td>string</td>
<td>Identificador legible (ej: &quot;IMP-001-2024&quot;)</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Tipo: <code>importation</code>, <code>exportation</code>, <code>domestic</code>, <code>crosstrade</code>, <code>transportation</code>, <code>consulting</code></td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Modo de transporte: <code>land</code>, <code>aerial</code>, <code>maritime</code></td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Estado: <code>confirmed</code>, <code>active</code>, <code>finished</code>, <code>closed</code>, <code>canceled</code></td>
</tr>
<tr>
<td>client_ref</td>
<td>string</td>
<td>Referencia del cliente</td>
</tr>
<tr>
<td>contact</td>
<td>object</td>
<td>Cliente de la operación</td>
</tr>
<tr>
<td>currency</td>
<td>object</td>
<td>Moneda de la operación</td>
</tr>
<tr>
<td>operational_agent</td>
<td>object</td>
<td>Agente operativo asignado</td>
</tr>
<tr>
<td>profit_amount</td>
<td>decimal</td>
<td>Monto de ganancia</td>
</tr>
<tr>
<td>profit_percentage</td>
<td>decimal</td>
<td>Porcentaje de ganancia</td>
</tr>
<tr>
<td>services_count</td>
<td>integer</td>
<td>Número de servicios asociados</td>
</tr>
<tr>
<td>comments_count</td>
<td>integer</td>
<td>Número de comentarios</td>
</tr>
<tr>
<td>tasks_count</td>
<td>integer</td>
<td>Número de tareas</td>
</tr>
<tr>
<td>folders_count</td>
<td>integer</td>
<td>Número de carpetas de documentos</td>
</tr>
<tr>
<td>goods_description</td>
<td>string</td>
<td>Descripción de la mercancía</td>
</tr>
<tr>
<td>incoterm</td>
<td>string</td>
<td>INCOTERM aplicable</td>
</tr>
<tr>
<td>service_scope</td>
<td>string</td>
<td>Alcance del servicio (ej: <code>door_to_door</code>, <code>port_to_port</code>)</td>
</tr>
<tr>
<td>services</td>
<td>array</td>
<td>Servicios completos (solo en show)</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>Fecha de creación</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>Fecha de última actualización</td>
</tr>
</tbody></table>
<h2 id='listar-operaciones-get'>Listar Operaciones <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/operations
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/operations"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-001-2024"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACME"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACME SA DE CV"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Peso Mexicano"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"operational_agent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agente@apunto.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"profit_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5000.00</span><span class="p">,</span><span class="w">
      </span><span class="nl">"profit_percentage"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"services_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"comments_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasks_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"folders_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna una lista paginada de operaciones de la cuenta.</p>
<h3 id='parametros-query'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>Número de página (default: 1)</td>
</tr>
<tr>
<td>per_page</td>
<td>Registros por página (default: 25, max: 100)</td>
</tr>
</tbody></table>
<h2 id='obtener-una-operacion-get'>Obtener una Operación <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/operations/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/operations/123"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-001-2024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importation"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACME"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACME SA DE CV"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MXN"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Peso Mexicano"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"goods_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maquinaria industrial"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"incoterm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FOB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"service_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"door_to_door"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QT-12345"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"nomenclature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8479.89.99"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"profit_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5000.00</span><span class="p">,</span><span class="w">
    </span><span class="nl">"profit_percentage"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"services_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"comments_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tasks_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"folders_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"urgente"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cliente-vip"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SRV-001-2024"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shipment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fcl"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shipment_kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"international"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"supplier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAERSK"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maersk Line"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"eta_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-15"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"etd_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-20"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BL123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"booking"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOK789"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna los detalles completos de una operación específica.</p>

<aside class="notice">
<strong>Importante</strong>: El endpoint <code>show</code> incluye los <strong>servicios completos anidados</strong>, mientras que el <code>index</code> solo incluye contadores (<code>services_count</code>, <code>comments_count</code>, etc.) para optimizar el rendimiento en listas grandes.
</aside>
<h2 id='crear-operacion-post'>Crear Operación <span class="badge badge-info">POST</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /api/v1/operations
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/operations"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "operation": {
      "contact_code": "ACME",
      "currency_code": "MXN",
      "operational_agent_email": "agente@apunto.com",
      "kind": "importation",
      "mode": "maritime",
      "client_ref": "REF-001",
      "goods_description": "Maquinaria industrial",
      "incoterm": "FOB"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">operation: </span><span class="p">{</span>
    <span class="ss">contact_code: </span><span class="s1">'ACME'</span><span class="p">,</span>
    <span class="ss">currency_code: </span><span class="s1">'MXN'</span><span class="p">,</span>
    <span class="ss">operational_agent_email: </span><span class="s1">'agente@apunto.com'</span><span class="p">,</span>
    <span class="ss">kind: </span><span class="s1">'importation'</span><span class="p">,</span>
    <span class="ss">mode: </span><span class="s1">'maritime'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"operation"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"contact_code"</span><span class="p">:</span> <span class="s">"ACME"</span><span class="p">,</span>
        <span class="s">"currency_code"</span><span class="p">:</span> <span class="s">"MXN"</span><span class="p">,</span>
        <span class="s">"operational_agent_email"</span><span class="p">:</span> <span class="s">"agente@apunto.com"</span><span class="p">,</span>
        <span class="s">"kind"</span><span class="p">:</span> <span class="s">"importation"</span><span class="p">,</span>
        <span class="s">"mode"</span><span class="p">:</span> <span class="s">"maritime"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">operation</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">contact_code</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ACME</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">currency_code</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MXN</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">operational_agent_email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">agente@apunto.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">kind</span><span class="p">:</span> <span class="dl">'</span><span class="s1">importation</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">maritime</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON (201 Created)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">124</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-002-2024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importation"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"goods_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maquinaria industrial"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"incoterm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FOB"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T09:15:00Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operación creada exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Crea una nueva operación.</p>
<h3 id='parametros'>Parámetros</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contact_code</td>
<td>string</td>
<td>Sí</td>
<td>Código (alias) del contacto</td>
</tr>
<tr>
<td>currency_code</td>
<td>string</td>
<td>No</td>
<td>Código de moneda (default: MXN)</td>
</tr>
<tr>
<td>operational_agent_email</td>
<td>string</td>
<td>No</td>
<td>Email del agente operativo</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Sí</td>
<td>Tipo de operación</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Sí</td>
<td>Modo de transporte</td>
</tr>
<tr>
<td>client_ref</td>
<td>string</td>
<td>No</td>
<td>Referencia del cliente</td>
</tr>
<tr>
<td>goods_description</td>
<td>string</td>
<td>No</td>
<td>Descripción de mercancía</td>
</tr>
<tr>
<td>incoterm</td>
<td>string</td>
<td>No</td>
<td>INCOTERM</td>
</tr>
<tr>
<td>service_scope</td>
<td>string</td>
<td>No</td>
<td>Alcance del servicio</td>
</tr>
<tr>
<td>tag_list</td>
<td>array</td>
<td>No</td>
<td>Lista de etiquetas</td>
</tr>
</tbody></table>
<h3 id='valores-permitidos'>Valores Permitidos</h3>
<p><strong>kind</strong>: <code>importation</code>, <code>exportation</code>, <code>domestic</code>, <code>crosstrade</code>, <code>transportation</code>, <code>consulting</code>, <code>export_trading_company</code>, <code>import_trading_company</code></p>

<p><strong>mode</strong>: <code>land</code>, <code>aerial</code>, <code>maritime</code></p>

<p><strong>status</strong>: <code>confirmed</code>, <code>active</code>, <code>finished</code>, <code>closed</code>, <code>canceled</code></p>
<h2 id='actualizar-operacion-put'>Actualizar Operación <span class="badge badge-warning">PUT</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>PUT /api/v1/operations/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="s2">"https://control.apunto.io/api/v1/operations/123"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization"</span>: Bearer TU_TOKEN<span class="s2">" </span><span class="se">\</span><span class="s2">
  -H "</span>Content-Type: application/json<span class="s2">" </span><span class="se">\</span><span class="s2">
  -d '{
    "</span>operation<span class="s2">": {
      "</span>status<span class="s2">": "</span>active<span class="s2">",
      "</span>client_ref<span class="s2">": "</span>REF-001-UPDATED<span class="s2">"
    }
  }'
</span></code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations/123'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">operation: </span><span class="p">{</span>
    <span class="ss">status: </span><span class="s1">'active'</span><span class="p">,</span>
    <span class="ss">client_ref: </span><span class="s1">'REF-001-UPDATED'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations/123"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"operation"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"status"</span><span class="p">:</span> <span class="s">"active"</span><span class="p">,</span>
        <span class="s">"client_ref"</span><span class="p">:</span> <span class="s">"REF-001-UPDATED"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations/123</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">operation</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">client_ref</span><span class="p">:</span> <span class="dl">'</span><span class="s1">REF-001-UPDATED</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-001-2024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001-UPDATED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T10:45:00Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operación actualizada exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Actualiza una operación existente.</p>
<h2 id='eliminar-operacion-delete'>Eliminar Operación <span class="badge badge-danger">DELETE</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>DELETE /api/v1/operations/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://control.apunto.io/api/v1/operations/123"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operación eliminada exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Elimina una operación y todos sus servicios asociados.</p>
<h2 id='comentarios-de-operacion'>Comentarios de Operación</h2>
<p>Los comentarios están anidados bajo las operaciones. Ver <a href="#comentarios-messages">Comentarios</a> para más detalles.</p>
<div class="highlight"><pre class="highlight plaintext"><code>GET    /api/v1/operations/:operation_id/messages
POST   /api/v1/operations/:operation_id/messages
PUT    /api/v1/operations/:operation_id/messages/:id
DELETE /api/v1/operations/:operation_id/messages/:id
</code></pre></div><h2 id='tareas-de-operacion'>Tareas de Operación</h2>
<p>Las tareas están anidadas bajo las operaciones. Ver <a href="#tareas-to-dos">Tareas</a> para más detalles.</p>
<div class="highlight"><pre class="highlight plaintext"><code>GET    /api/v1/operations/:operation_id/to_dos
POST   /api/v1/operations/:operation_id/to_dos
PUT    /api/v1/operations/:operation_id/to_dos/:id
POST   /api/v1/operations/:operation_id/to_dos/:id/complete
DELETE /api/v1/operations/:operation_id/to_dos/:id
</code></pre></div><h1 id='servicios'>Servicios</h1>
<p>Los servicios representan los componentes logísticos individuales dentro de una operación (transporte marítimo, aéreo, terrestre, aduanas, etc.).</p>
<h2 id='objeto-service'>Objeto Service</h2><h3 id='atributos-principales'>Atributos Principales</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único</td>
</tr>
<tr>
<td>identification</td>
<td>string</td>
<td>Identificador legible (ej: &quot;SRV-001-2024&quot;)</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Modo: <code>land</code>, <code>aerial</code>, <code>maritime</code>, <code>customs</code></td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Estado: <code>active</code>, <code>finished</code>, <code>closed</code>, <code>canceled</code></td>
</tr>
<tr>
<td>shipment_type</td>
<td>string</td>
<td>Tipo de envío (ej: <code>fcl</code>, <code>lcl</code>)</td>
</tr>
<tr>
<td>shipment_kind</td>
<td>string</td>
<td>Clase de envío (ej: <code>international</code>, <code>domestic</code>)</td>
</tr>
<tr>
<td>operation</td>
<td>object</td>
<td>Operación padre (anidada)</td>
</tr>
<tr>
<td>supplier</td>
<td>object</td>
<td>Proveedor del servicio (anidado)</td>
</tr>
<tr>
<td>service_agent</td>
<td>object</td>
<td>Agente de servicio (anidado)</td>
</tr>
<tr>
<td>eta_date</td>
<td>date</td>
<td>Fecha estimada de arribo</td>
</tr>
<tr>
<td>etd_date</td>
<td>date</td>
<td>Fecha estimada de salida</td>
</tr>
<tr>
<td>pickup_date</td>
<td>date</td>
<td>Fecha de recolección</td>
</tr>
<tr>
<td>delivery_date</td>
<td>date</td>
<td>Fecha de entrega</td>
</tr>
<tr>
<td>comments_count</td>
<td>integer</td>
<td>Número de comentarios</td>
</tr>
<tr>
<td>tasks_count</td>
<td>integer</td>
<td>Número de tareas</td>
</tr>
<tr>
<td>folders_count</td>
<td>integer</td>
<td>Número de carpetas de documentos</td>
</tr>
<tr>
<td>bl</td>
<td>string</td>
<td>Bill of Lading</td>
</tr>
<tr>
<td>booking</td>
<td>string</td>
<td>Número de reserva</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>Fecha de creación</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>Fecha de última actualización</td>
</tr>
</tbody></table>
<h2 id='listar-servicios-get'>Listar Servicios <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/services
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/services"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/services'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/services"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/services</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SRV-001-2024"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shipment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fcl"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shipment_kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"international"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-001-2024"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importation"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"supplier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
        </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAERSK"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maersk Line"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"service_agent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agente@apunto.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"María López"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"eta_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-15"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"etd_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-20"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pickup_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-18"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delivery_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-17"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"comments_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tasks_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"folders_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">85</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna una lista paginada de servicios de la cuenta.</p>
<h3 id='parametros-query'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>Número de página (default: 1)</td>
</tr>
<tr>
<td>per_page</td>
<td>Registros por página (default: 25, max: 100)</td>
</tr>
</tbody></table>
<h2 id='obtener-un-servicio-get'>Obtener un Servicio <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/services/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/services/789"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SRV-001-2024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shipment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fcl"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shipment_kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"international"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-001-2024"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"supplier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAERSK"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maersk Line"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"service_agent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agente@apunto.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"María López"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"bl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BL123456"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"booking"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOK789"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"guide_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"flight_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"awb_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"airline_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shipping_line_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maersk"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customs_agent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">333</span><span class="p">,</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADUANAS-MX"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aduanas México SA"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"customs_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">444</span><span class="p">,</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADUANA-VERACRUZ"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aduana Veracruz"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customs"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"full_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Puerto de Veracruz, Veracruz, México"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"customs_reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-ADU-001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dispatch_appointment_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-16T09:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"observations"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Requiere inspección especial"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"eta_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"etd_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pickup_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-18"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"delivery_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-17"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mbl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MBL123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hbl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HBL456"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mawb"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hawb"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pedimento"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24-01-1234-5678901"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"carta_porte"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"manifiesto_carga"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAN-001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"comments_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tasks_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"folders_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"urgente"</span><span class="p">,</span><span class="w"> </span><span class="s2">"refrigerado"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:30:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna los detalles completos de un servicio específico.</p>

<aside class="notice">
Nota: Los campos <code>operation</code>, <code>supplier</code>, <code>service_agent</code>, <code>customs_agent</code> y <code>customs_address</code> retornan objetos completos anidados con toda su información relevante, no solo IDs.
</aside>
<h2 id='crear-servicio-post'>Crear Servicio <span class="badge badge-info">POST</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /api/v1/services
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/services"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "service": {
      "operation_id": 123,
      "supplier_code": "MAERSK",
      "service_agent_email": "agente@apunto.com",
      "mode": "maritime",
      "shipment_type": "fcl",
      "shipment_kind": "international",
      "bl": "BL123456",
      "booking": "BOOK789"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/services'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">service: </span><span class="p">{</span>
    <span class="ss">operation_id: </span><span class="mi">123</span><span class="p">,</span>
    <span class="ss">supplier_code: </span><span class="s1">'MAERSK'</span><span class="p">,</span>
    <span class="ss">service_agent_email: </span><span class="s1">'agente@apunto.com'</span><span class="p">,</span>
    <span class="ss">mode: </span><span class="s1">'maritime'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/services"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"service"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"operation_id"</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="s">"supplier_code"</span><span class="p">:</span> <span class="s">"MAERSK"</span><span class="p">,</span>
        <span class="s">"service_agent_email"</span><span class="p">:</span> <span class="s">"agente@apunto.com"</span><span class="p">,</span>
        <span class="s">"mode"</span><span class="p">:</span> <span class="s">"maritime"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/services</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">service</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">operation_id</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="na">supplier_code</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MAERSK</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">service_agent_email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">agente@apunto.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">mode</span><span class="p">:</span> <span class="dl">'</span><span class="s1">maritime</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON (201 Created)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">790</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SRV-002-2024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maritime"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IMP-001-2024"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importation"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_ref"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REF-001"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"supplier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAERSK"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maersk Line"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"bl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BL123456"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"booking"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOOK789"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T09:15:00Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Servicio creado exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Crea un nuevo servicio dentro de una operación.</p>
<h3 id='parametros'>Parámetros</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>operation_id</td>
<td>integer</td>
<td>Sí</td>
<td>ID de la operación padre</td>
</tr>
<tr>
<td>supplier_code</td>
<td>string</td>
<td>No</td>
<td>Código (alias) del proveedor</td>
</tr>
<tr>
<td>service_agent_email</td>
<td>string</td>
<td>No</td>
<td>Email del agente de servicio</td>
</tr>
<tr>
<td>mode</td>
<td>string</td>
<td>Sí</td>
<td>Modo de transporte</td>
</tr>
<tr>
<td>shipment_type</td>
<td>string</td>
<td>No</td>
<td>Tipo de envío</td>
</tr>
<tr>
<td>shipment_kind</td>
<td>string</td>
<td>No</td>
<td>Clase de envío</td>
</tr>
<tr>
<td>bl</td>
<td>string</td>
<td>No</td>
<td>Bill of Lading</td>
</tr>
<tr>
<td>booking</td>
<td>string</td>
<td>No</td>
<td>Número de reserva</td>
</tr>
<tr>
<td>eta_date</td>
<td>date</td>
<td>No</td>
<td>Fecha estimada de arribo</td>
</tr>
<tr>
<td>etd_date</td>
<td>date</td>
<td>No</td>
<td>Fecha estimada de salida</td>
</tr>
</tbody></table>
<h3 id='valores-permitidos'>Valores Permitidos</h3>
<p><strong>mode</strong>: <code>land</code>, <code>aerial</code>, <code>maritime</code>, <code>customs</code></p>

<p><strong>status</strong>: <code>active</code>, <code>finished</code>, <code>closed</code>, <code>canceled</code></p>

<p><strong>shipment_type</strong>: <code>fcl</code>, <code>lcl</code>, <code>air</code>, <code>truck</code></p>

<p><strong>shipment_kind</strong>: <code>international</code>, <code>domestic</code></p>
<h2 id='actualizar-servicio-put'>Actualizar Servicio <span class="badge badge-warning">PUT</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>PUT /api/v1/services/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="s2">"https://control.apunto.io/api/v1/services/789"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "service": {
      "status": "finished",
      "eta_date": "2024-02-14"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/services/789'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">service: </span><span class="p">{</span>
    <span class="ss">status: </span><span class="s1">'finished'</span><span class="p">,</span>
    <span class="ss">eta_date: </span><span class="s1">'2024-02-14'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/services/789"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"service"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"status"</span><span class="p">:</span> <span class="s">"finished"</span><span class="p">,</span>
        <span class="s">"eta_date"</span><span class="p">:</span> <span class="s">"2024-02-14"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/services/789</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PUT</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">service</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">finished</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">eta_date</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2024-02-14</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">789</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SRV-001-2024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"finished"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"eta_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-14"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T10:45:00Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Servicio actualizado exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Actualiza un servicio existente.</p>
<h2 id='eliminar-servicio-delete'>Eliminar Servicio <span class="badge badge-danger">DELETE</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>DELETE /api/v1/services/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://control.apunto.io/api/v1/services/789"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Servicio eliminado exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Elimina un servicio.</p>
<h2 id='comentarios-de-servicio'>Comentarios de Servicio</h2>
<p>Los comentarios están anidados bajo los servicios. Ver <a href="#comentarios-messages">Comentarios</a> para más detalles.</p>
<div class="highlight"><pre class="highlight plaintext"><code>GET    /api/v1/services/:service_id/messages
POST   /api/v1/services/:service_id/messages
PUT    /api/v1/services/:service_id/messages/:id
DELETE /api/v1/services/:service_id/messages/:id
</code></pre></div><h2 id='tareas-de-servicio'>Tareas de Servicio</h2>
<p>Las tareas están anidadas bajo los servicios. Ver <a href="#tareas-to-dos">Tareas</a> para más detalles.</p>
<div class="highlight"><pre class="highlight plaintext"><code>GET    /api/v1/services/:service_id/to_dos
POST   /api/v1/services/:service_id/to_dos
PUT    /api/v1/services/:service_id/to_dos/:id
POST   /api/v1/services/:service_id/to_dos/:id/complete
DELETE /api/v1/services/:service_id/to_dos/:id
</code></pre></div><h1 id='contactos'>Contactos</h1>
<p>Los contactos representan clientes, proveedores, prospectos y otros participantes en las operaciones de freight forwarding.</p>
<h2 id='objeto-contact'>Objeto Contact</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC Trading Company"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC1234567890"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"legal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC Trading Company S.A. de C.V."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"client"</span><span class="p">,</span><span class="w"> </span><span class="s2">"supplier"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"maritime"</span><span class="p">,</span><span class="w"> </span><span class="s2">"aerial"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contacto@abc.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+52 55 1234 5678"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
    </span><span class="nl">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Reforma 123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06600"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MX"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"prioritario"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-10T09:00:00Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='atributos'>Atributos</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del contacto</td>
</tr>
<tr>
<td>alias</td>
<td>string</td>
<td>Alias corto (sin espacios)</td>
</tr>
<tr>
<td>identification</td>
<td>string</td>
<td>RFC o identificación fiscal</td>
</tr>
<tr>
<td>legal_name</td>
<td>string</td>
<td>Razón social legal</td>
</tr>
<tr>
<td>kind</td>
<td>array</td>
<td>Tipos: <code>client</code>, <code>supplier</code>, <code>prospect</code>, <code>carrier</code>, <code>customs_agent</code></td>
</tr>
<tr>
<td>services</td>
<td>array</td>
<td>Servicios: <code>maritime</code>, <code>aerial</code>, <code>land</code>, <code>customs</code></td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Correo electrónico</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>Teléfono</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Estado: <code>active</code>, <code>inactive</code></td>
</tr>
<tr>
<td>billing_address</td>
<td>object</td>
<td>Dirección de facturación</td>
</tr>
<tr>
<td>tags</td>
<td>array</td>
<td>Etiquetas del contacto</td>
</tr>
</tbody></table>
<h2 id='listar-contactos-get'>Listar Contactos <span class="badge badge-success">GET</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/contacts"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"https://control.apunto.io/api/v1/contacts"</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Bearer TU_TOKEN_API"</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">hostname</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">,</span> <span class="ss">use_ssl: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer TU_TOKEN_API'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://control.apunto.io/api/v1/contacts'</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/contacts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span> <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"contacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC Trading Company"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"client"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Obtiene una lista de todos los contactos de la cuenta autenticada.</p>
<h3 id='peticion-http'>Petición HTTP</h3>
<p><code>GET /api/v1/contacts</code></p>
<h3 id='parametros-query'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Por Defecto</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>integer</td>
<td>1</td>
<td>Número de página</td>
</tr>
<tr>
<td>per_page</td>
<td>integer</td>
<td>25</td>
<td>Registros por página</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>null</td>
<td>Filtrar por tipo: <code>client</code>, <code>supplier</code>, <code>prospect</code></td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>all</td>
<td>Filtrar por estado</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>null</td>
<td>Búsqueda por nombre, alias o identificación</td>
</tr>
</tbody></table>
<h2 id='obtener-un-contacto-especifico'>Obtener un Contacto Específico</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/contacts/456"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC Trading Company"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"identification"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC1234567890"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"client"</span><span class="p">,</span><span class="w"> </span><span class="s2">"supplier"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"services"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"maritime"</span><span class="p">,</span><span class="w"> </span><span class="s2">"aerial"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contacto@abc.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+52 55 1234 5678"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Reforma 123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Obtiene los detalles de un contacto específico.</p>
<h3 id='peticion-http-2'>Petición HTTP</h3>
<p><code>GET /api/v1/contacts/:id</code></p>
<h2 id='crear-un-contacto-post'>Crear un Contacto <span class="badge badge-info">POST</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/contacts"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "contact": {
      "name": "XYZ Logistics",
      "alias": "XYZ",
      "kind": ["client"],
      "email": "info@xyz.com",
      "phone": "+52 55 9876 5432",
      "billing_address_attributes": {
        "street": "Calle Principal 456",
        "city": "Monterrey",
        "state": "Nuevo León",
        "postal_code": "64000",
        "country": "MX",
        "address_type": "billing"
      }
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/contacts'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN_API'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact: </span><span class="p">{</span>
    <span class="ss">name: </span><span class="s1">'XYZ Logistics'</span><span class="p">,</span>
    <span class="ss">alias: </span><span class="s1">'XYZ'</span><span class="p">,</span>
    <span class="ss">kind: </span><span class="p">[</span><span class="s1">'client'</span><span class="p">],</span>
    <span class="ss">email: </span><span class="s1">'info@xyz.com'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'contact'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'name'</span><span class="p">:</span> <span class="s">'XYZ Logistics'</span><span class="p">,</span>
        <span class="s">'alias'</span><span class="p">:</span> <span class="s">'XYZ'</span><span class="p">,</span>
        <span class="s">'kind'</span><span class="p">:</span> <span class="p">[</span><span class="s">'client'</span><span class="p">],</span>
        <span class="s">'email'</span><span class="p">:</span> <span class="s">'info@xyz.com'</span><span class="p">,</span>
        <span class="s">'phone'</span><span class="p">:</span> <span class="s">'+52 55 9876 5432'</span><span class="p">,</span>
        <span class="s">'billing_address_attributes'</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">'street'</span><span class="p">:</span> <span class="s">'Calle Principal 456'</span><span class="p">,</span>
            <span class="s">'city'</span><span class="p">:</span> <span class="s">'Monterrey'</span><span class="p">,</span>
            <span class="s">'postal_code'</span><span class="p">:</span> <span class="s">'64000'</span><span class="p">,</span>
            <span class="s">'country'</span><span class="p">:</span> <span class="s">'MX'</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">'https://control.apunto.io/api/v1/contacts'</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="n">payload</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/contacts</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contact</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">XYZ Logistics</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">alias</span><span class="p">:</span> <span class="dl">'</span><span class="s1">XYZ</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">kind</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">client</span><span class="dl">'</span><span class="p">],</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">info@xyz.com</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">457</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Logistics"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"client"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T10:00:00Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Crea un nuevo contacto.</p>
<h3 id='peticion-http-3'>Petición HTTP</h3>
<p><code>POST /api/v1/contacts</code></p>
<h3 id='parametros-del-body'>Parámetros del Body</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Sí</td>
<td>Nombre del contacto</td>
</tr>
<tr>
<td>alias</td>
<td>string</td>
<td>Sí</td>
<td>Alias corto (sin espacios)</td>
</tr>
<tr>
<td>kind</td>
<td>array</td>
<td>Sí</td>
<td>Tipos de contacto</td>
</tr>
<tr>
<td>identification</td>
<td>string</td>
<td>No</td>
<td>RFC o identificación fiscal</td>
</tr>
<tr>
<td>legal_name</td>
<td>string</td>
<td>No</td>
<td>Razón social</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>No</td>
<td>Correo electrónico</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>No</td>
<td>Teléfono</td>
</tr>
<tr>
<td>services</td>
<td>array</td>
<td>No</td>
<td>Servicios que ofrece/requiere</td>
</tr>
<tr>
<td>billing_address_attributes</td>
<td>object</td>
<td>No</td>
<td>Dirección de facturación</td>
</tr>
</tbody></table>
<h2 id='actualizar-un-contacto-patch'>Actualizar un Contacto <span class="badge badge-warning">PATCH</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://control.apunto.io/api/v1/contacts/456"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "contact": {
      "email": "nuevo@abc.com",
      "phone": "+52 55 1111 2222",
      "tags": ["vip", "prioritario"]
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/contacts/456'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Patch</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN_API'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">contact: </span><span class="p">{</span>
    <span class="ss">email: </span><span class="s1">'nuevo@abc.com'</span><span class="p">,</span>
    <span class="ss">phone: </span><span class="s1">'+52 55 1111 2222'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/contacts/456"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN_API"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"contact"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"email"</span><span class="p">:</span> <span class="s">"nuevo@abc.com"</span><span class="p">,</span>
        <span class="s">"phone"</span><span class="p">:</span> <span class="s">"+52 55 1111 2222"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">patch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/contacts/456</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PATCH</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">contact</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">nuevo@abc.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">phone</span><span class="p">:</span> <span class="dl">'</span><span class="s1">+52 55 1111 2222</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC Trading Company"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nuevo@abc.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+52 55 1111 2222"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T11:00:00Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Actualiza un contacto existente.</p>
<h3 id='peticion-http-4'>Petición HTTP</h3>
<p><code>PATCH /api/v1/contacts/:id</code></p>
<h3 id='parametros-url'>Parámetros URL</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>El ID del contacto a actualizar</td>
</tr>
</tbody></table>
<h2 id='busqueda-rapida-de-contactos-get'>Búsqueda Rápida de Contactos <span class="badge badge-success">GET</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/contacts/search?q=ABC"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div>
<p>Busca contactos por nombre, alias o identificación.</p>
<h3 id='peticion-http-5'>Petición HTTP</h3>
<p><code>GET /api/v1/contacts/search</code></p>
<h3 id='parametros-query-2'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>q</td>
<td>string</td>
<td>Término de búsqueda</td>
</tr>
<tr>
<td>kind</td>
<td>string</td>
<td>Filtrar por tipo</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>Número máximo de resultados (por defecto: 10)</td>
</tr>
</tbody></table>
<h1 id='direcciones'>Direcciones</h1>
<p>Las direcciones representan ubicaciones físicas para embarques, facturación, aduanas, puertos y aeropuertos.</p>
<h2 id='objeto-address'>Objeto Address</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Almacén Principal CDMX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALM-CDMX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipping"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Insurgentes Sur 1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"outdoor_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"internal_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Int. 5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"neighborhood"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Col. Del Valle"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03100"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Almacén de recepción y distribución"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact_information"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez - Tel: 55-1234-5678"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-10T09:00:00Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='atributos'>Atributos</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre descriptivo de la ubicación</td>
</tr>
<tr>
<td>alias</td>
<td>string</td>
<td>Alias corto para referencia rápida</td>
</tr>
<tr>
<td>address_type</td>
<td>string</td>
<td>Tipo: <code>billing</code>, <code>shipping</code>, <code>port</code>, <code>customs</code>, <code>airport</code>, <code>general</code></td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Estado: <code>active</code>, <code>inactive</code></td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>Calle</td>
</tr>
<tr>
<td>outdoor_number</td>
<td>string</td>
<td>Número exterior</td>
</tr>
<tr>
<td>internal_number</td>
<td>string</td>
<td>Número interior</td>
</tr>
<tr>
<td>neighborhood</td>
<td>string</td>
<td>Colonia o barrio</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>Ciudad</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Estado o provincia</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>Código postal</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>Código de país (ISO 3166-1 alpha-2)</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción adicional</td>
</tr>
<tr>
<td>contact_information</td>
<td>string</td>
<td>Información de contacto en la ubicación</td>
</tr>
</tbody></table>
<h2 id='listar-direcciones-get'>Listar Direcciones <span class="badge badge-success">GET</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/addresses"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="s2">"https://control.apunto.io/api/v1/addresses"</span><span class="p">)</span>
<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Bearer TU_TOKEN_API"</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">hostname</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">,</span> <span class="ss">use_ssl: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer TU_TOKEN_API'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span>
    <span class="s">'https://control.apunto.io/api/v1/addresses'</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/addresses</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span> <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Almacén Principal CDMX"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALM-CDMX"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipping"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Obtiene una lista de todas las direcciones de la cuenta autenticada.</p>
<h3 id='peticion-http'>Petición HTTP</h3>
<p><code>GET /api/v1/addresses</code></p>
<h3 id='parametros-query'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Por Defecto</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>integer</td>
<td>1</td>
<td>Número de página</td>
</tr>
<tr>
<td>per_page</td>
<td>integer</td>
<td>25</td>
<td>Registros por página</td>
</tr>
<tr>
<td>address_type</td>
<td>string</td>
<td>all</td>
<td>Filtrar por tipo de dirección</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>all</td>
<td>Filtrar por estado</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>null</td>
<td>Filtrar por ciudad</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>null</td>
<td>Filtrar por país</td>
</tr>
<tr>
<td>search</td>
<td>string</td>
<td>null</td>
<td>Búsqueda por nombre o alias</td>
</tr>
</tbody></table>
<h2 id='obtener-una-direccion-especifica-get'>Obtener una Dirección Específica <span class="badge badge-success">GET</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/addresses/101"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Almacén Principal CDMX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ALM-CDMX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shipping"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Insurgentes Sur 1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"outdoor_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"neighborhood"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Col. Del Valle"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ciudad de México"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03100"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"full_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Av. Insurgentes Sur 1234, Col. Del Valle, 03100, Ciudad de México, MX"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Obtiene los detalles de una dirección específica.</p>
<h3 id='peticion-http-2'>Petición HTTP</h3>
<p><code>GET /api/v1/addresses/:id</code></p>
<h2 id='crear-una-direccion-post'>Crear una Dirección <span class="badge badge-info">POST</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/addresses"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "address": {
      "name": "Puerto de Veracruz",
      "alias": "VER-PORT",
      "address_type": "port",
      "street": "Av. Marina Mercante",
      "outdoor_number": "S/N",
      "neighborhood": "Puerto de Veracruz",
      "city": "Veracruz",
      "state": "Veracruz",
      "postal_code": "91700",
      "country": "MX",
      "description": "Terminal de contenedores"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'address'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'name'</span><span class="p">:</span> <span class="s">'Puerto de Veracruz'</span><span class="p">,</span>
        <span class="s">'alias'</span><span class="p">:</span> <span class="s">'VER-PORT'</span><span class="p">,</span>
        <span class="s">'address_type'</span><span class="p">:</span> <span class="s">'port'</span><span class="p">,</span>
        <span class="s">'street'</span><span class="p">:</span> <span class="s">'Av. Marina Mercante'</span><span class="p">,</span>
        <span class="s">'city'</span><span class="p">:</span> <span class="s">'Veracruz'</span><span class="p">,</span>
        <span class="s">'state'</span><span class="p">:</span> <span class="s">'Veracruz'</span><span class="p">,</span>
        <span class="s">'postal_code'</span><span class="p">:</span> <span class="s">'91700'</span><span class="p">,</span>
        <span class="s">'country'</span><span class="p">:</span> <span class="s">'MX'</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span>
    <span class="s">'https://control.apunto.io/api/v1/addresses'</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
    <span class="n">json</span><span class="o">=</span><span class="n">payload</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">address</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Puerto de Veracruz</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">alias</span><span class="p">:</span> <span class="dl">'</span><span class="s1">VER-PORT</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">address_type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">port</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">street</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Av. Marina Mercante</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">city</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Veracruz</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">postal_code</span><span class="p">:</span> <span class="dl">'</span><span class="s1">91700</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">country</span><span class="p">:</span> <span class="dl">'</span><span class="s1">MX</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/addresses</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Puerto de Veracruz"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VER-PORT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"port"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Veracruz"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T10:30:00Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Crea una nueva dirección.</p>
<h3 id='peticion-http-3'>Petición HTTP</h3>
<p><code>POST /api/v1/addresses</code></p>
<h3 id='parametros-del-body'>Parámetros del Body</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Sí</td>
<td>Nombre de la ubicación</td>
</tr>
<tr>
<td>address_type</td>
<td>string</td>
<td>Sí</td>
<td>Tipo de dirección</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>Sí</td>
<td>Calle</td>
</tr>
<tr>
<td>neighborhood</td>
<td>string</td>
<td>Sí</td>
<td>Colonia</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>Sí</td>
<td>Ciudad</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Sí</td>
<td>Estado</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>Sí</td>
<td>Código postal</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>Sí</td>
<td>Código de país (2 letras, ej: MX, US)</td>
</tr>
<tr>
<td>alias</td>
<td>string</td>
<td>No</td>
<td>Alias corto</td>
</tr>
<tr>
<td>outdoor_number</td>
<td>string</td>
<td>No</td>
<td>Número exterior</td>
</tr>
<tr>
<td>internal_number</td>
<td>string</td>
<td>No</td>
<td>Número interior</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>No</td>
<td>Descripción (máx. 255 caracteres)</td>
</tr>
<tr>
<td>contact_information</td>
<td>string</td>
<td>No</td>
<td>Contacto (máx. 255 caracteres)</td>
</tr>
</tbody></table>
<h2 id='actualizar-una-direccion-patch'>Actualizar una Dirección <span class="badge badge-warning">PATCH</span></h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PATCH <span class="s2">"https://control.apunto.io/api/v1/addresses/101"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "address": {
      "contact_information": "Ana García - Tel: 55-9999-8888",
      "description": "Almacén actualizado con nuevo contacto",
      "status": "active"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/addresses/101'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Patch</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN_API'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">address: </span><span class="p">{</span>
    <span class="ss">contact_information: </span><span class="s1">'Ana García - Tel: 55-9999-8888'</span><span class="p">,</span>
    <span class="ss">description: </span><span class="s1">'Almacén actualizado con nuevo contacto'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/addresses/101"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN_API"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"address"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"contact_information"</span><span class="p">:</span> <span class="s">"Ana García - Tel: 55-9999-8888"</span><span class="p">,</span>
        <span class="s">"description"</span><span class="p">:</span> <span class="s">"Almacén actualizado con nuevo contacto"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">patch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/addresses/101</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PATCH</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN_API</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">address</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">contact_information</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Ana García - Tel: 55-9999-8888</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Almacén actualizado con nuevo contacto</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Almacén Principal CDMX"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contact_information"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ana García - Tel: 55-9999-8888"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T11:30:00Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Actualiza una dirección existente.</p>
<h3 id='peticion-http-4'>Petición HTTP</h3>
<p><code>PATCH /api/v1/addresses/:id</code></p>
<h3 id='parametros-url'>Parámetros URL</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>El ID de la dirección a actualizar</td>
</tr>
</tbody></table>
<h2 id='tipos-de-direccion'>Tipos de Dirección</h2>
<table><thead>
<tr>
<th>Tipo</th>
<th>Descripción</th>
<th>Uso Común</th>
</tr>
</thead><tbody>
<tr>
<td>billing</td>
<td>Facturación</td>
<td>Dirección fiscal del contacto</td>
</tr>
<tr>
<td>shipping</td>
<td>Embarque</td>
<td>Origen/destino de mercancía</td>
</tr>
<tr>
<td>port</td>
<td>Puerto</td>
<td>Terminal marítima</td>
</tr>
<tr>
<td>customs</td>
<td>Aduana</td>
<td>Recinto aduanero</td>
</tr>
<tr>
<td>airport</td>
<td>Aeropuerto</td>
<td>Terminal aérea</td>
</tr>
<tr>
<td>general</td>
<td>General</td>
<td>Uso múltiple</td>
</tr>
</tbody></table>
<h2 id='busqueda-de-direcciones'>Búsqueda de Direcciones</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/addresses/search?q=Puerto&amp;type=port"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN_API"</span>
</code></pre></div>
<p>Busca direcciones por nombre, alias o ciudad.</p>
<h3 id='peticion-http-5'>Petición HTTP</h3>
<p><code>GET /api/v1/addresses/search</code></p>
<h3 id='parametros-query-2'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>q</td>
<td>string</td>
<td>Término de búsqueda</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Filtrar por tipo de dirección</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>Filtrar por país</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>Número máximo de resultados (por defecto: 10)</td>
</tr>
</tbody></table>

<aside class="notice">
El campo <code>country</code> debe usar el código ISO 3166-1 alpha-2 de 2 letras (ej: MX para México, US para Estados Unidos).
</aside>
<h1 id='comentarios-messages'>Comentarios (Messages)</h1>
<p>Los comentarios permiten agregar notas, comunicaciones y actualizaciones a operaciones, servicios y contactos. Están <strong>anidados bajo sus recursos padre</strong>.</p>
<h2 id='objeto-message'>Objeto Message</h2><h3 id='atributos-principales'>Atributos Principales</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único</td>
</tr>
<tr>
<td>content</td>
<td>text</td>
<td>Contenido del comentario</td>
</tr>
<tr>
<td>owner</td>
<td>object</td>
<td>Usuario que creó el comentario</td>
</tr>
<tr>
<td>edited</td>
<td>boolean</td>
<td>Indica si el comentario fue editado</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>Fecha de creación</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>Fecha de última actualización</td>
</tr>
</tbody></table>
<h2 id='listar-comentarios-get'>Listar Comentarios <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/operations/:operation_id/messages
GET /api/v1/services/:service_id/messages
GET /api/v1/contacts/:contact_id/messages
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Comentarios de una operación</span>
curl <span class="s2">"https://control.apunto.io/api/v1/operations/123/messages"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>

<span class="c"># Comentarios de un servicio</span>
curl <span class="s2">"https://control.apunto.io/api/v1/services/789/messages"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations/123/messages'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations/123/messages"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations/123/messages</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
      </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cliente confirmó recepción de mercancía"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usuario@apunto.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"edited"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T14:30:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T14:30:00Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna todos los comentarios de un recurso específico.</p>
<h3 id='parametros-query'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>Número de página (default: 1)</td>
</tr>
<tr>
<td>per_page</td>
<td>Registros por página (default: 25, max: 100)</td>
</tr>
</tbody></table>
<h2 id='obtener-un-comentario-get'>Obtener un Comentario <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/operations/:operation_id/messages/:id
GET /api/v1/services/:service_id/messages/:id
GET /api/v1/contacts/:contact_id/messages/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/operations/123/messages/456"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cliente confirmó recepción de mercancía"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usuario@apunto.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"edited"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T14:30:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T14:30:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna un comentario específico.</p>
<h2 id='crear-comentario-post'>Crear Comentario <span class="badge badge-info">POST</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /api/v1/operations/:operation_id/messages
POST /api/v1/services/:service_id/messages
POST /api/v1/contacts/:contact_id/messages
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/operations/123/messages"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "message": {
      "content": "Cliente solicitó actualización de ETA"
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations/123/messages'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">message: </span><span class="p">{</span>
    <span class="ss">content: </span><span class="s1">'Cliente solicitó actualización de ETA'</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations/123/messages"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"message"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"content"</span><span class="p">:</span> <span class="s">"Cliente solicitó actualización de ETA"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations/123/messages</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">message</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">content</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Cliente solicitó actualización de ETA</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON (201 Created)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">457</span><span class="p">,</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cliente solicitó actualización de ETA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usuario@apunto.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Pérez"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"edited"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T15:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T15:00:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Crea un nuevo comentario en el recurso especificado.</p>
<h3 id='parametros'>Parámetros</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>content</td>
<td>text</td>
<td>Sí</td>
<td>Contenido del comentario</td>
</tr>
</tbody></table>
<h2 id='actualizar-comentario-put'>Actualizar Comentario <span class="badge badge-warning">PUT</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>PUT /api/v1/operations/:operation_id/messages/:id
PUT /api/v1/services/:service_id/messages/:id
PUT /api/v1/contacts/:contact_id/messages/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="s2">"https://control.apunto.io/api/v1/operations/123/messages/456"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "message": {
      "content": "Cliente confirmó recepción de mercancía [EDITADO]"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cliente confirmó recepción de mercancía [EDITADO]"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"edited"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T15:30:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Actualiza un comentario existente.</p>
<h2 id='eliminar-comentario-delete'>Eliminar Comentario <span class="badge badge-danger">DELETE</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>DELETE /api/v1/operations/:operation_id/messages/:id
DELETE /api/v1/services/:service_id/messages/:id
DELETE /api/v1/contacts/:contact_id/messages/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://control.apunto.io/api/v1/operations/123/messages/456"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comentario eliminado exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Elimina un comentario.</p>

<aside class="notice">
<strong>Importante</strong>: Los comentarios están siempre anidados bajo su recurso padre. Los campos <code>messageable_type</code> y <code>messageable_id</code> NO se incluyen en la respuesta porque son redundantes - la URL ya indica el recurso padre.
</aside>
<h3 id='ejemplo-de-contexto-por-url'>Ejemplo de Contexto por URL</h3>
<p>Cuando llamas a <code>GET /api/v1/operations/123/messages</code>, ya sabes que:
- <code>messageable_type</code> = &quot;Operation&quot;
- <code>messageable_id</code> = 123</p>

<p>Por lo tanto, estos campos no se incluyen en la respuesta JSON.</p>
<h1 id='tareas-to-dos'>Tareas (To-Dos)</h1>
<p>Las tareas permiten crear seguimiento y recordatorios asociados a operaciones, servicios y contactos. Están <strong>anidados bajo sus recursos padre</strong>.</p>
<h2 id='objeto-todo'>Objeto ToDo</h2><h3 id='atributos-principales'>Atributos Principales</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título de la tarea</td>
</tr>
<tr>
<td>description</td>
<td>text</td>
<td>Descripción detallada</td>
</tr>
<tr>
<td>start_at</td>
<td>datetime</td>
<td>Fecha de inicio</td>
</tr>
<tr>
<td>end_at</td>
<td>datetime</td>
<td>Fecha de fin</td>
</tr>
<tr>
<td>completed</td>
<td>boolean</td>
<td>Estado de completado</td>
</tr>
<tr>
<td>rejected</td>
<td>boolean</td>
<td>Si la tarea fue rechazada</td>
</tr>
<tr>
<td>required</td>
<td>boolean</td>
<td>Si la tarea es requerida</td>
</tr>
<tr>
<td>completed_at</td>
<td>datetime</td>
<td>Fecha de completado</td>
</tr>
<tr>
<td>owner</td>
<td>object</td>
<td>Usuario asignado a la tarea</td>
</tr>
<tr>
<td>completed_by</td>
<td>object</td>
<td>Usuario que completó la tarea</td>
</tr>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>Fecha de creación</td>
</tr>
<tr>
<td>updated_at</td>
<td>datetime</td>
<td>Fecha de última actualización</td>
</tr>
</tbody></table>
<h2 id='listar-tareas-get'>Listar Tareas <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/operations/:operation_id/to_dos
GET /api/v1/services/:service_id/to_dos
GET /api/v1/contacts/:contact_id/to_dos
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># Tareas de una operación</span>
curl <span class="s2">"https://control.apunto.io/api/v1/operations/123/to_dos"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>

<span class="c"># Tareas de un servicio</span>
curl <span class="s2">"https://control.apunto.io/api/v1/services/789/to_dos"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations/123/to_dos'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations/123/to_dos"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations/123/to_dos</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"to_dos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Solicitar documentos al cliente"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"end_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-20T18:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"completed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operador@apunto.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos Ramírez"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"completed_by"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:00:00Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"pagination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna todas las tareas de un recurso específico.</p>
<h3 id='parametros-query'>Parámetros Query</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>Número de página (default: 1)</td>
</tr>
<tr>
<td>per_page</td>
<td>Registros por página (default: 25, max: 100)</td>
</tr>
<tr>
<td>completed</td>
<td>Filtrar por estado: <code>true</code>, <code>false</code></td>
</tr>
</tbody></table>
<h2 id='obtener-una-tarea-get'>Obtener una Tarea <span class="badge badge-success">GET</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>GET /api/v1/operations/:operation_id/to_dos/:id
GET /api/v1/services/:service_id/to_dos/:id
GET /api/v1/contacts/:contact_id/to_dos/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://control.apunto.io/api/v1/operations/123/to_dos/321"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"to_do"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Solicitar documentos al cliente"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-20T18:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operador@apunto.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos Ramírez"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"completed_by"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-15T10:00:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retorna una tarea específica.</p>
<h2 id='crear-tarea-post'>Crear Tarea <span class="badge badge-info">POST</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /api/v1/operations/:operation_id/to_dos
POST /api/v1/services/:service_id/to_dos
POST /api/v1/contacts/:contact_id/to_dos
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/operations/123/to_dos"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "to_do": {
      "title": "Revisar documentación aduanal",
      "description": "Verificar que todos los documentos estén completos",
      "start_at": "2024-01-20T09:00:00Z",
      "end_at": "2024-01-25T18:00:00Z",
      "required": true
    }
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://control.apunto.io/api/v1/operations/123/to_dos'</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Authorization'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Bearer TU_TOKEN'</span>
<span class="n">request</span><span class="p">[</span><span class="s1">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">to_do: </span><span class="p">{</span>
    <span class="ss">title: </span><span class="s1">'Revisar documentación aduanal'</span><span class="p">,</span>
    <span class="ss">description: </span><span class="s1">'Verificar que todos los documentos estén completos'</span><span class="p">,</span>
    <span class="ss">start_at: </span><span class="s1">'2024-01-20T09:00:00Z'</span><span class="p">,</span>
    <span class="ss">end_at: </span><span class="s1">'2024-01-25T18:00:00Z'</span><span class="p">,</span>
    <span class="ss">required: </span><span class="kp">true</span>
  <span class="p">}</span>
<span class="p">}.</span><span class="nf">to_json</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://control.apunto.io/api/v1/operations/123/to_dos"</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Bearer TU_TOKEN"</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/json"</span>
<span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"to_do"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"title"</span><span class="p">:</span> <span class="s">"Revisar documentación aduanal"</span><span class="p">,</span>
        <span class="s">"description"</span><span class="p">:</span> <span class="s">"Verificar que todos los documentos estén completos"</span><span class="p">,</span>
        <span class="s">"start_at"</span><span class="p">:</span> <span class="s">"2024-01-20T09:00:00Z"</span><span class="p">,</span>
        <span class="s">"end_at"</span><span class="p">:</span> <span class="s">"2024-01-25T18:00:00Z"</span><span class="p">,</span>
        <span class="s">"required"</span><span class="p">:</span> <span class="n">true</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">())</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://control.apunto.io/api/v1/operations/123/to_dos</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">Authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bearer TU_TOKEN</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">to_do</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Revisar documentación aduanal</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">description</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Verificar que todos los documentos estén completos</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">start_at</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2024-01-20T09:00:00Z</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">end_at</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2024-01-25T18:00:00Z</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">required</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON (201 Created)</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"to_do"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">322</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Revisar documentación aduanal"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"start_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-20T09:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-25T18:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rejected"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operador@apunto.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos Ramírez"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"completed_by"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T11:00:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Crea una nueva tarea en el recurso especificado.</p>
<h3 id='parametros'>Parámetros</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Tipo</th>
<th>Requerido</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Sí</td>
<td>Título de la tarea</td>
</tr>
<tr>
<td>description</td>
<td>text</td>
<td>No</td>
<td>Descripción detallada</td>
</tr>
<tr>
<td>start_at</td>
<td>datetime</td>
<td>No</td>
<td>Fecha de inicio</td>
</tr>
<tr>
<td>end_at</td>
<td>datetime</td>
<td>No</td>
<td>Fecha de fin</td>
</tr>
<tr>
<td>required</td>
<td>boolean</td>
<td>No</td>
<td>Si la tarea es requerida</td>
</tr>
</tbody></table>
<h2 id='actualizar-tarea-put'>Actualizar Tarea <span class="badge badge-warning">PUT</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>PUT /api/v1/operations/:operation_id/to_dos/:id
PUT /api/v1/services/:service_id/to_dos/:id
PUT /api/v1/contacts/:contact_id/to_dos/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> PUT <span class="s2">"https://control.apunto.io/api/v1/operations/123/to_dos/321"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "to_do": {
      "title": "Solicitar documentos al cliente [URGENTE]",
      "end_at": "2024-01-18T18:00:00Z",
      "required": true
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"to_do"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Solicitar documentos al cliente [URGENTE]"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-18T18:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T11:30:00Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Actualiza una tarea existente.</p>
<h2 id='marcar-como-completada-post'>Marcar como Completada <span class="badge badge-info">POST</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /api/v1/operations/:operation_id/to_dos/:id/complete
POST /api/v1/services/:service_id/to_dos/:id/complete
POST /api/v1/contacts/:contact_id/to_dos/:id/complete
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> POST <span class="s2">"https://control.apunto.io/api/v1/operations/123/to_dos/321/complete"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"to_do"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Solicitar documentos al cliente"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-01-16T12:00:00Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tarea marcada como completada"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Marca una tarea como completada.</p>

<aside class="notice">
Para marcar una tarea como NO completada, usa el endpoint de actualización con <code>completed: false</code>.
</aside>
<h2 id='eliminar-tarea-delete'>Eliminar Tarea <span class="badge badge-danger">DELETE</span></h2>
<blockquote>
<p>Definición</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>DELETE /api/v1/operations/:operation_id/to_dos/:id
DELETE /api/v1/services/:service_id/to_dos/:id
DELETE /api/v1/contacts/:contact_id/to_dos/:id
</code></pre></div>
<blockquote>
<p>Ejemplo de llamada</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> DELETE <span class="s2">"https://control.apunto.io/api/v1/operations/123/to_dos/321"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer TU_TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Respuesta JSON</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tarea eliminada exitosamente"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Elimina una tarea.</p>

<aside class="notice">
<strong>Importante</strong>: Las tareas están siempre anidadas bajo su recurso padre. Los campos <code>todoable_type</code> y <code>todoable_id</code> NO se incluyen en la respuesta porque son redundantes - la URL ya indica el recurso padre.
</aside>
<h3 id='ejemplo-de-contexto-por-url'>Ejemplo de Contexto por URL</h3>
<p>Cuando llamas a <code>GET /api/v1/operations/123/to_dos</code>, ya sabes que:
- <code>todoable_type</code> = &quot;Operation&quot;
- <code>todoable_id</code> = 123</p>

<p>Por lo tanto, estos campos no se incluyen en la respuesta JSON.</p>
<h1 id='errores'>Errores</h1>
<p>La API usa códigos de estado HTTP convencionales para indicar éxito o fallo.</p>
<h2 id='codigos-de-estado-http'>Códigos de Estado HTTP</h2>
<table><thead>
<tr>
<th>Código</th>
<th>Significado</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Petición exitosa</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>Recurso creado exitosamente</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
<td>Petición exitosa sin contenido (típicamente DELETE)</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Petición inválida</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Autenticación fallida o token inválido</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>No tienes permiso para este recurso</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>Recurso no encontrado</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity</td>
<td>Error de validación</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests</td>
<td>Límite de tasa excedido</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>Error en el servidor</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>Problema temporal del servidor</td>
</tr>
</tbody></table>
<h2 id='formato-de-respuesta-de-error'>Formato de Respuesta de Error</h2>
<blockquote>
<p>Ejemplo de error:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation failed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No se pudo guardar el recurso"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"contact_id"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"no puede estar en blanco"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"no está incluido en la lista"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"no puede estar en blanco"</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">422</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Todos los errores siguen este formato:</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>string</td>
<td>Tipo de error corto</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>Mensaje de error legible</td>
</tr>
<tr>
<td>details</td>
<td>object</td>
<td>Detalles de validación (para errores 422)</td>
</tr>
<tr>
<td>status</td>
<td>integer</td>
<td>Código de estado HTTP</td>
</tr>
</tbody></table>
<h2 id='errores-comunes'>Errores Comunes</h2><h3 id='error-de-autenticacion'>Error de Autenticación</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token de API inválido o faltante"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">401</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Causa:</strong> Header <code>Authorization</code> faltante o inválido.</p>

<p><strong>Solución:</strong> Asegúrate de enviar un token válido en formato <code>Bearer TU_TOKEN_API</code>.</p>
<h3 id='error-de-validacion'>Error de Validación</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation failed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No se pudo guardar el recurso"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"no puede estar en blanco"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"no es válido"</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">422</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Causa:</strong> Campos requeridos faltantes o datos que no cumplen validaciones.</p>

<p><strong>Solución:</strong> Revisa el objeto <code>details</code> para errores específicos.</p>
<h3 id='recurso-no-encontrado'>Recurso No Encontrado</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No se encontró la operación solicitada"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Causa:</strong> El ID del recurso no existe o no tienes acceso.</p>

<p><strong>Solución:</strong> Verifica el ID y tus permisos.</p>
<h3 id='limite-de-tasa-excedido'>Límite de Tasa Excedido</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rate limit exceeded"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Has excedido el límite. Intenta más tarde."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"retry_after"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">429</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Causa:</strong> Demasiadas peticiones en poco tiempo.</p>

<p><strong>Solución:</strong> Espera el tiempo en <code>retry_after</code> (segundos). Implementa backoff exponencial.</p>
<h3 id='permiso-denegado'>Permiso Denegado</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Forbidden"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No tienes permiso para esta acción"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">403</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Causa:</strong> Tu cuenta o token no tiene los permisos necesarios.</p>

<p><strong>Solución:</strong> Contacta al administrador para solicitar permisos.</p>
<h3 id='error-del-servidor'>Error del Servidor</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Internal Server Error"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ocurrió un error inesperado. Intenta más tarde."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Causa:</strong> Error inesperado en el servidor.</p>

<p><strong>Solución:</strong> Reintenta la petición. Si persiste, contacta soporte.</p>
<h2 id='mejores-practicas'>Mejores Prácticas</h2>
<ol>
<li><strong>Verifica códigos de estado</strong> - No te bases solo en el body</li>
<li><strong>Implementa reintentos</strong> - Para errores 5xx y rate limits (429)</li>
<li><strong>Usa backoff exponencial</strong> - Al reintentar peticiones fallidas</li>
<li><strong>Registra errores</strong> - Guarda respuestas de error para debugging</li>
<li><strong>Valida antes de enviar</strong> - Reduce errores 422 validando en cliente</li>
<li><strong>Maneja expiración de tokens</strong> - Prepárate para refrescar tokens</li>
<li><strong>Mensajes al usuario</strong> - Muestra errores significativos a usuarios finales</li>
</ol>
<h2 id='ejemplo-de-manejo-de-errores'>Ejemplo de Manejo de Errores</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="k">def</span> <span class="nf">make_api_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">method</span> <span class="o">=</span> <span class="ss">:get</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
  <span class="c1"># ... código de petición ...</span>

  <span class="k">case</span> <span class="n">response</span><span class="p">.</span><span class="nf">code</span><span class="p">.</span><span class="nf">to_i</span>
  <span class="k">when</span> <span class="mi">200</span><span class="o">..</span><span class="mi">299</span>
    <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
  <span class="k">when</span> <span class="mi">401</span>
    <span class="k">raise</span> <span class="s1">'Error de autenticación. Verifica tu token.'</span>
  <span class="k">when</span> <span class="mi">404</span>
    <span class="k">raise</span> <span class="s1">'Recurso no encontrado.'</span>
  <span class="k">when</span> <span class="mi">422</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
    <span class="k">raise</span> <span class="s2">"Errores de validación: </span><span class="si">#{</span><span class="n">errors</span><span class="p">[</span><span class="s1">'details'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">when</span> <span class="mi">429</span>
    <span class="n">retry_after</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">'Retry-After'</span><span class="p">].</span><span class="nf">to_i</span>
    <span class="nb">sleep</span><span class="p">(</span><span class="n">retry_after</span><span class="p">)</span>
    <span class="n">make_api_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">method</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span> <span class="c1"># Reintentar</span>
  <span class="k">when</span> <span class="mi">500</span><span class="o">..</span><span class="mi">599</span>
    <span class="k">raise</span> <span class="s1">'Error del servidor. Intenta más tarde.'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="k">def</span> <span class="nf">make_api_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">'GET'</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

        <span class="k">if</span> <span class="mi">200</span> <span class="o">&lt;=</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">'Error de autenticación'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">'Recurso no encontrado'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">422</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s">'Validación: </span><span class="si">{</span><span class="n">errors</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"details"</span><span class="p">)</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">429</span><span class="p">:</span>
            <span class="n">retry_after</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">headers</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'Retry-After'</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
            <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">retry_after</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">make_api_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">&gt;=</span> <span class="mi">500</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">'Error del servidor'</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">requests</span><span class="p">.</span><span class="n">exceptions</span><span class="p">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s">'Petición fallida: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">makeApiRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">method</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span> <span class="nx">body</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">({</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">headers</span> <span class="p">});</span>
    <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">?.</span><span class="nx">status</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">?.</span><span class="nx">data</span><span class="p">;</span>

    <span class="k">switch</span> <span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="mi">401</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error de autenticación</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">case</span> <span class="mi">404</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Recurso no encontrado</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">case</span> <span class="mi">422</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Validación: </span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">details</span><span class="p">)}</span><span class="s2">`</span><span class="p">);</span>
      <span class="k">case</span> <span class="mi">429</span><span class="p">:</span>
        <span class="kd">const</span> <span class="nx">retryAfter</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">'</span><span class="s1">retry-after</span><span class="dl">'</span><span class="p">])</span> <span class="o">||</span> <span class="mi">60</span><span class="p">;</span>
        <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">retryAfter</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">));</span>
        <span class="k">return</span> <span class="nx">makeApiRequest</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">body</span><span class="p">);</span>
      <span class="k">case</span> <span class="mi">500</span><span class="p">:</span>
      <span class="k">case</span> <span class="mi">502</span><span class="p">:</span>
      <span class="k">case</span> <span class="mi">503</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error del servidor</span><span class="dl">'</span><span class="p">);</span>
      <span class="nl">default</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Error: </span><span class="p">${</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
